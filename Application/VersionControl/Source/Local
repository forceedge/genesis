#!/usr/bin/env bash

function genesisEdit() {
	$genesis_editor $genesis_dir;
}

function genesisSave() {

	currentDir=$(pwd);
	cd $genesis_dir;
	print "Files edited:";
	git diff --name-only

	cd $currentDir;

	print "Please enter a commit message:";
	read message;

	cd $genesis_dir;

	print "Existing tags:";
	git tag;
	print "Current version:";
	git describe --tag

	cd $currentDir;

	print "Please enter a version number for this push: (leave empty to skip tagging)";
	read version;

	print "Saving changes with message: '$message'";

	cd $genesis_dir;

	git pull;
	git add --all;
	git commit -m "$message";
	git push;

	if [[ ! -z $version ]]; then
		git tag $version;
		git push --tag;
	fi;

	cd $currentDir;
}

function genesisUpdate() {
	print "Updating genesis on local machine";
	currentDir=$(pwd);
	cd $genesis_dir;
	git pull;
	cd $currentDir;
}

function genesisStatus() {
	print "Showing git status on Genesis";
	currentDir=$(pwd);
	cd $genesis_dir;
	git status;
	cd $currentDir;
}